<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.devdotdone.ddd.dao.TagDao">
  <!-- 태그 생성 -->
  <insert id="insertTag" parameterType="Tag">
    <selectKey keyProperty="tagId" resultType="int" order="BEFORE"> 
      select seq_tag_tag_id.nextval from dual 
    </selectKey> 
    INSERT INTO tag (tag_id, tagName, tagType) 
    VALUES (#{tagId}, #{tagName}, #{tagType}) 
  </insert>

  <!-- 식별자 ID로 조회 -->
  <select id="selectTagById" resultType="Tag" parameterType="String"> 
    SELECT tag_id, tagName, tagType FROM tag WHERE
    tag_id= #{tagId} 
  </select>

  <!-- 태그 이름으로 조회 -->
  <select id="selectTagByTagName" resultType="Tag" parameterType="String"> 
    SELECT tag_id, tagName, tagType FROM tag
    WHERE tagName = #{tagName} 
  </select>

  <!-- 태그 타입으로 조회 -->
  <select id="selectTagByTagType" resultType="Tag" parameterType="String"> 
    SELECT tag_id, tagName, tagType FROM tag 
    WHERE tagType= #{tagType} 
  </select>

  <!-- 전체 태그 조회 -->
  <select id="selectAllTags" resultType="Tag"> 
    SELECT tag_id, tagName, tagType FROM tag
  </select>

  <!-- 태그 정보 수정 -->
  <update id="updateTag" parameterType="Tag"> 
    UPDATE tag SET tagName = #{tagName}, tagType = #{tagType}
    WHERE tag_id = #{tagId} 
  </update>

  <!-- 태그 삭제 -->
  <delete id="deleteTag" parameterType="int"> 
    DELETE FROM tag WHERE tag_id = #{tagId} 
  </delete>
</mapper>