<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.devdotdone.ddd.dao.TagDao">
  <!-- 태그생성 -->
  <insert id="insertTag" parameterType="Tag">
    <selectKey keyProperty="tagId" resultType="int" order="BEFORE"> 
      select seq_tag_tag_id.nextval from dual 
    </selectKey> 
    INSERT INTO tag (tag_id, tagName, tagType) 
    VALUES (#{tagId}, #{tagName}, #{tagType}) 
  </insert>

  <!-- 전체 태그 조회 -->
  <select id="selectAllTags" resultType="Tag"> 
    SELECT tag_id, tagName, tagType FROM tag
  </select>

  <!-- 태그 타입 조회 selectTagByTagType('USER/PROJECT') 기술 스택 목록 가져오기 -->
  <select id="selectByTagType" resultType="Tag" parameterType="String"> 
    SELECT tag_id, tagName, tagType FROM tag 
    WHERE tagType= #{tagType}
    ORDER BY tagName
  </select>

  <!-- 태그 수정 -->
  <update id="updateTag" parameterType="Tag"> 
    UPDATE tag SET tagName = #{tagName}, tagType = #{tagType}
    WHERE tag_id = #{tagId} 
  </update>

  <!-- 태그 삭제 -->
  <delete id="deleteTag" parameterType="int"> 
    DELETE FROM tag WHERE tag_id = #{tagId} 
  </delete>
</mapper>